{"version":3,"sources":["webpack:///./templates/item.hbs","webpack:///./templates/city.hbs","webpack:///./js/refs.js","webpack:///./js/fetchApi.js","webpack:///./js/fetchByLoc.js","webpack:///./js/renderApi.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","stack1","helper","alias1","nullContext","alias2","hooks","helperMissing","alias4","escapeExpression","alias5","lambda","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","program","noop","body","document","querySelector","form","formBox","input","weatherBox","cityList","menu","localBtn","_city","this","newCity","fetchWeather","url","fetch","response","json","_lat","_lon","newLat","newLon","fetchWeatherByLoc","render","refs","innerHTML","templateItem","itemTpl","insertAdjacentHTML","dateRef","localeUk","Date","textContent","toLocaleString","weekday","month","day","tempArray","querySelectorAll","forEach","item","index","roundTempsArr","push","Math","round","Number","parseFloat","roundTemp","timeMsArr","convertedTimeArr","convertedTime","parseInt","toLocaleTimeString","hour","minute","convertTime","windDir","degree","convertDir","addCityToFavourites","object","countFavorites","localStorage","getItem","city","id","name","coord","country","sys","i","storageCity","JSON","parse","notice","text","animateSpeed","delay","setItem","key","stringify","showFavourites","favoriteArr","markup","cityTpl","chooseShowCity","currentCityLocal","localCity","fetchApi","then","onRej","console","log","toggleMenu","classList","toggle","WeatherBoxIsEmpty","h2","createElement","add","style","fontSize","insertAdjacentElement","showNoticeLoc","addEventListener","event","preventDefault","currentTarget","query","value","trim","status","cod","reset","alert","contains","target","nodeName","dataset","removeItem","deleteFavoriteCity","options","timeout","Promise","res","rej","navigator","geolocation","getCurrentPosition","location","lat","coords","latitude","lon","longitude","fetchByLoc","catch","err","fetchGeo"],"mappings":"8EAAA,IAAIA,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,EAAI,SAASC,EAAUC,EAAOC,EAAQC,EAASC,GAC5G,IAAIC,EAAQC,EAAQC,EAAiB,MAAVN,EAAiBA,EAAUD,EAAUQ,aAAe,GAAKC,EAAOT,EAAUU,MAAMC,cAAkCC,EAAOZ,EAAUa,iBAAkBC,EAAOd,EAAUe,OAAQC,EAAiBhB,EAAUgB,gBAAkB,SAASC,EAAQC,GACnQ,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,IAKtB,MAAO,yCACHN,EAR+H,mBAQtHN,EAAmH,OAAzGA,EAASU,EAAed,EAAQ,UAAsB,MAAVD,EAAiBe,EAAef,EAAO,QAAUA,IAAmBK,EAASG,GAAoCH,EAAOgB,KAAKf,EAAO,CAAC,KAAO,OAAO,KAAO,GAAG,KAAOH,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASE,GAChT,4BACAM,EAV+H,mBAUtHN,EAA+G,OAArGA,EAASU,EAAed,EAAQ,QAAoB,MAAVD,EAAiBe,EAAef,EAAO,MAAQA,IAAmBK,EAASG,GAAoCH,EAAOgB,KAAKf,EAAO,CAAC,KAAO,KAAK,KAAO,GAAG,KAAOH,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASE,GAC1S,sHACAM,EAAOE,EAA8I,OAArIT,EAAqF,OAA1EA,EAAoB,MAAVJ,EAAiBe,EAAef,EAAO,WAAaA,GAAmBe,EAAeX,EAAO,KAAOA,GAAmBW,EAAeX,EAAO,QAAUA,EAASJ,IACrM,uBACAW,EAAOE,EAAmF,OAA1ET,EAAoB,MAAVJ,EAAiBe,EAAef,EAAO,WAAaA,GAAmBe,EAAeX,EAAO,QAAUA,EAASJ,IAC1I,4HACAW,EAAOE,EAAgF,OAAvET,EAAoB,MAAVJ,EAAiBe,EAAef,EAAO,QAAUA,GAAmBe,EAAeX,EAAO,QAAUA,EAASJ,IACvI,yFACAW,EAAOE,EAAgF,OAAvET,EAAoB,MAAVJ,EAAiBe,EAAef,EAAO,QAAUA,GAAmBe,EAAeX,EAAO,YAAcA,EAASJ,IAC3I,gDACAW,EAAOE,EAAgF,OAAvET,EAAoB,MAAVJ,EAAiBe,EAAef,EAAO,QAAUA,GAAmBe,EAAeX,EAAO,YAAcA,EAASJ,IAC3I,iDACAW,EAAOE,EAA8I,OAArIT,EAAqF,OAA1EA,EAAoB,MAAVJ,EAAiBe,EAAef,EAAO,WAAaA,GAAmBe,EAAeX,EAAO,KAAOA,GAAmBW,EAAeX,EAAO,eAAiBA,EAASJ,IAC5M,kGACAW,EAAOE,EAAgF,OAAvET,EAAoB,MAAVJ,EAAiBe,EAAef,EAAO,QAAUA,GAAmBe,EAAeX,EAAO,cAAgBA,EAASJ,IAC7I,uFACAW,EAAOE,EAAgF,OAAvET,EAAoB,MAAVJ,EAAiBe,EAAef,EAAO,QAAUA,GAAmBe,EAAeX,EAAO,YAAcA,EAASJ,IAC3I,sFACAW,EAAOE,EAAgF,OAAvET,EAAoB,MAAVJ,EAAiBe,EAAef,EAAO,QAAUA,GAAmBe,EAAeX,EAAO,YAAcA,EAASJ,IAC3I,+IACAW,EAAOE,EAAgF,OAAvET,EAAoB,MAAVJ,EAAiBe,EAAef,EAAO,QAAUA,GAAmBe,EAAeX,EAAO,OAASA,EAASJ,IACtI,WACAW,EAAOE,EAAgF,OAAvET,EAAoB,MAAVJ,EAAiBe,EAAef,EAAO,QAAUA,GAAmBe,EAAeX,EAAO,SAAWA,EAASJ,IACxI,sGACAW,EAAOE,EAAkF,OAAzET,EAAoB,MAAVJ,EAAiBe,EAAef,EAAO,UAAYA,GAAmBe,EAAeX,EAAO,OAASA,EAASJ,IACxI,mGACAW,EAAOE,EAA+E,OAAtET,EAAoB,MAAVJ,EAAiBe,EAAef,EAAO,OAASA,GAAmBe,EAAeX,EAAO,WAAaA,EAASJ,IACzI,iGACAW,EAAOE,EAA+E,OAAtET,EAAoB,MAAVJ,EAAiBe,EAAef,EAAO,OAASA,GAAmBe,EAAeX,EAAO,UAAYA,EAASJ,IACxI,iBACJ,SAAW,CAAC,EAAE,YAAY,KAAO,SAASD,EAAUC,EAAOC,EAAQC,EAASC,GAC1E,IAAIC,EAON,OAA+R,OAAtRA,GAPsBL,EAAUgB,gBAAkB,SAASC,EAAQC,GACtE,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,KAKWhB,EAAQ,QAAQoB,KAAe,MAAVrB,EAAiBA,EAAUD,EAAUQ,aAAe,GAAIP,EAAO,CAAC,KAAO,OAAO,KAAO,GAAG,GAAKD,EAAUuB,QAAQ,EAAGnB,EAAM,GAAG,QAAUJ,EAAUwB,KAAK,KAAOpB,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,GAAG,IAAM,CAAC,KAAO,GAAG,OAAS,OAAiBC,EAAS,IAC/S,SAAU,K,qBCpDZ,IAAIT,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,EAAI,SAASC,EAAUC,EAAOC,EAAQC,EAASC,GAC5G,IAAIE,EAAQC,EAAiB,MAAVN,EAAiBA,EAAUD,EAAUQ,aAAe,GAAKC,EAAOT,EAAUU,MAAMC,cAAkCC,EAAOZ,EAAUa,iBAAkBG,EAAiBhB,EAAUgB,gBAAkB,SAASC,EAAQC,GAClO,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,IAKtB,MAAO,kEACHN,EARuH,mBAQ9GN,EAAiG,OAAvFA,EAASU,EAAed,EAAQ,UAAaE,GAAQY,EAAeZ,EAAK,UAAqBE,EAASG,GAAoCH,EAAOgB,KAAKf,EAAO,CAAC,KAAO,QAAQ,KAAO,GAAG,KAAOH,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASE,GAC/R,KACAM,EAVuH,mBAU9GN,EAAmH,OAAzGA,EAASU,EAAed,EAAQ,UAAsB,MAAVD,EAAiBe,EAAef,EAAO,QAAUA,IAAmBK,EAASG,GAAoCH,EAAOgB,KAAKf,EAAO,CAAC,KAAO,OAAO,KAAO,GAAG,KAAOH,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASE,GAChT,KACAM,EAZuH,mBAY9GN,EAAyH,OAA/GA,EAASU,EAAed,EAAQ,aAAyB,MAAVD,EAAiBe,EAAef,EAAO,WAAaA,IAAmBK,EAASG,GAAoCH,EAAOgB,KAAKf,EAAO,CAAC,KAAO,UAAU,KAAO,GAAG,KAAOH,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASE,GACzT,uEACAM,EAduH,mBAc9GN,EAAiG,OAAvFA,EAASU,EAAed,EAAQ,UAAaE,GAAQY,EAAeZ,EAAK,UAAqBE,EAASG,GAAoCH,EAAOgB,KAAKf,EAAO,CAAC,KAAO,QAAQ,KAAO,GAAG,KAAOH,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASE,GAC/R,8BACJ,SAAW,CAAC,EAAE,YAAY,KAAO,SAASN,EAAUC,EAAOC,EAAQC,EAASC,GAC1E,IAAIC,EAON,OAA8R,OAArRA,GAPsBL,EAAUgB,gBAAkB,SAASC,EAAQC,GACtE,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,KAKWhB,EAAQ,QAAQoB,KAAe,MAAVrB,EAAiBA,EAAUD,EAAUQ,aAAe,GAAIP,EAAO,CAAC,KAAO,OAAO,KAAO,GAAG,GAAKD,EAAUuB,QAAQ,EAAGnB,EAAM,GAAG,QAAUJ,EAAUwB,KAAK,KAAOpB,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,GAAG,IAAM,CAAC,KAAO,EAAE,OAAS,OAAiBC,EAAS,IAC9S,SAAU,K,4LC5BG,GACboB,KAAMC,SAASC,cAAc,QAC7BC,KAAMF,SAASC,cAAc,gBAC7BE,QAASH,SAASC,cAAc,gBAChCG,MAAOJ,SAASC,cAAc,iBAC9BI,WAAYL,SAASC,cAAc,gBACnCK,SAAUN,SAASC,cAAc,aACjCM,KAAMP,SAASC,cAAc,SAC7BO,SAAUR,SAASC,cAAc,c,yHCRnC,IAEe,GACbQ,MAAO,GACP,WACE,OAAOC,KAAKD,OAEd,SAASE,GACPD,KAAKD,MAAQE,GAETC,aARO,WAQQ,I,EAAA,c,EAAA,qIAEbC,EAFa,qDAE8C,EAAKJ,MAFnD,wEAGIK,MAAMD,GAHV,cAGbE,EAHa,yBAIZA,EAASC,QAJG,0C,4SCVvB,IAEe,GACbC,KAAM,EACNC,KAAM,EACN,QAAQC,GACNT,KAAKO,KAAOE,GAEd,QAAQC,GACNV,KAAKQ,KAAOE,GAERC,kBATO,WASa,I,EAAA,c,EAAA,qIAClBR,EADkB,uDAC2C,EAAKI,KADhD,QAC4D,EAAKC,KADjE,wEAEDJ,MAAMD,GAFL,cAElBE,EAFkB,yBAGjBA,EAASC,QAHQ,0C,kYCgB5B,SAASM,EAAO5C,GACd6C,EAAKlB,WAAWmB,UAAY,GAC5B,IAAMC,EAAeC,IAAQhD,GAC7B6C,EAAKlB,WAAWsB,mBAAmB,YAAaF,GAChD,IAAMG,EAAU5B,SAASC,cAAc,UAOjC4B,EANM,IAAIC,KAA2B,IAAtBF,EAAQG,aAMNC,eAAe,QALtB,CACdC,QAAS,OACTC,MAAO,OACPC,IAAK,YAGPP,EAAQG,YAAR,GAAyBF,EACzB,IAAMO,EAAYpC,SAASqC,iBAAiB,YAC5CD,EAAUE,SACR,SAACC,EAAMC,GAAP,OAAkBD,EAAKR,YAU3B,SAAmBK,GACjB,IAAMK,EAAgB,GAItB,OAHAL,EAAUE,SAAQ,YAAqB,IAAlBP,EAAkB,EAAlBA,YACnBU,EAAcC,KAAKC,KAAKC,MAAMC,OAAOC,WAAWf,QAE3CU,EAfgCM,CAAUX,GAAWI,GAAS,OAErE,IAAMQ,EAAYhD,SAASqC,iBAAiB,YAC5CW,EAAUV,SACR,SAACC,EAAMC,GAAP,OAAkBD,EAAKR,YAc3B,SAAqBiB,GACnB,IAAMC,EAAmB,GAUzB,OATAD,EAAUV,SAAQ,YAAqB,IAAlBP,EAAkB,EAAlBA,YAMbmB,EALO,IAAIpB,KAAoC,IAA/Be,OAAOM,SAASpB,IAKXqB,mBAAmB,QAJ9B,CACdC,KAAM,UACNC,OAAQ,YAGVL,EAAiBP,KAAKQ,MAEjBD,EAzBgCM,CAAYP,GAAWR,MAE9D,IAAMgB,EAAUxD,SAASC,cAAc,YACvCuD,EAAQzB,YAyBV,YAAqC,IAAfA,EAAe,EAAfA,YACd0B,EAASZ,OAAOM,SAASpB,GAC/B,QAAQ,GACN,KAAgB,IAAX0B,GAAgB,IACnB,MAAO,IACT,KAAKA,EAAS,GAAKA,EAAS,GAC1B,MAAO,MACT,KAAgB,KAAXA,EACH,MAAO,KACT,KAAKA,EAAS,IAAMA,EAAS,GAC3B,MAAO,MACT,KAAgB,KAAXA,EACH,MAAO,IACT,KAAKA,EAAS,IAAMA,EAAS,IAC3B,MAAO,MACT,KAAgB,MAAXA,EACH,MAAO,KACT,KAAKA,EAAS,KAAOA,EAAS,IAC5B,MAAO,MACT,KAAgB,MAAXA,EACH,MAAO,IACT,KAAKA,EAAS,KAAOA,EAAS,IAC5B,MAAO,MACT,KAAgB,MAAXA,EACH,MAAO,KACT,KAAKA,EAAS,KAAOA,EAAS,IAC5B,MAAO,MACT,KAAgB,MAAXA,EACH,MAAO,IACT,KAAKA,EAAS,KAAOA,EAAS,IAC5B,MAAO,MACT,KAAgB,MAAXA,EACH,MAAO,KACT,KAAKA,EAAS,MAAmB,IAAXA,GAAgB,KACpC,MAAO,MACT,QACE,OAAOA,GA7DWC,CAAWF,GAiEnC,SAASG,EAAoBC,GAC3B,IAAIpB,EACEqB,EAAiBC,aAAaC,QAAQ,kBAEtCC,EAAO,CACXC,GAAIL,EAAOK,GACXD,KAAMJ,EAAOM,KACbC,MAAOP,EAAOO,MACdC,QAASR,EAAOS,IAAID,SAGtB,GAAIP,EAAgB,CAClBrB,EAAQK,OAAOM,SAASU,GACxBrB,IAEA,IAAK,IAAI8B,EAAI,EAAGA,EAAI9B,EAAO8B,IAAK,CAC9B,IACMC,EADgBC,KAAKC,MAAMX,aAAaC,QAAb,WAAgCO,IAC/BN,KAClC,GAAIJ,EAAOM,OAASK,EAClB,OA0HCG,iBAAO,CACZC,KAAM,qBACNC,aAAc,OACdC,MAAO,MA1HPf,aAAagB,QAAQ,iBAArB,GAA0CtC,GAC1C,IAAMuC,EAAM,WAAWvC,EACvBsB,aAAagB,QAAQC,EAAKP,KAAKQ,UAAUhB,IACzCF,aAAagB,QAAQ,cAAeN,KAAKQ,UAAUhB,IACnDiB,QACK,CACLzC,EAAQ,EACRsB,aAAagB,QAAQ,iBAArB,GAA0CtC,GAE1C,IAAMuC,EAAM,WAAWvC,EACvBsB,aAAagB,QAAQC,EAAKP,KAAKQ,UAAUhB,IACzCF,aAAagB,QAAQ,cAAeN,KAAKQ,UAAUhB,IACnDiB,KAGJ,SAASA,IACP1D,EAAKjB,SAASkB,UAAY,GAC1B,IAAMqC,EAAiBC,aAAaC,QAAQ,kBAC5C,GAAIF,EAAgB,CAGlB,IAFA,IAAMqB,EAAc,GACd1C,EAAQK,OAAOM,SAASU,GACrBS,EAAI,EAAGA,GAAK9B,EAAO8B,IAAK,CAC/B,IAAMS,EAAM,WAAWT,EACjB/B,EAAOiC,KAAKC,MAAMX,aAAaC,QAAQgB,IAC7CG,EAAYxC,KAAKH,GAEnB,IAAM4C,EAASC,IAAQ,OAAD,UAAMF,IAC5B3D,EAAKjB,SAASqB,mBAAmB,YAAawD,IA2BlD,SAASE,IACP,IAAMC,EAAmBxB,aAAaC,QAAQ,eACxCwB,EAAYf,KAAKC,MAAMa,GAE7B,GAAkB,OAAdC,EACFC,EAASxB,KAAOuB,EAAUvB,KAC1BwB,EAAS5E,eAAe6E,MACtB,SAAA/G,GAAI,OAAI4C,EAAO,CAAE5C,YACjB,SAAAgH,GAAK,OAAIC,QAAQC,IAAIF,UAElB,CACL,IAAMJ,EAAmBxB,aAAaC,QAAb,aACzBD,aAAagB,QAAQ,cAAeQ,IAIxC,SAASO,IACPtE,EAAKpB,QAAQ2F,UAAUC,OAAO,WAC9BxE,EAAKlB,WAAWyF,UAAUC,OAAO,WAOnC,SAASC,IACPzE,EAAKlB,WAAWmB,UAAY,GAC5B,IAAMyE,EAAKjG,SAASkG,cAAc,MAClCD,EAAGH,UAAUK,IAAI,sBACjBF,EAAGG,MAAMC,SAAW,OACpBJ,EAAGlE,YAAc,yCACjBR,EAAKlB,WAAWiG,sBAAsB,YAAaL,GAwCrD,SAASM,IACP,OAAO7B,iBAAO,CACZC,KAAM,+BACNC,aAAc,OACdC,MAAO,MA7PXtD,EAAKrB,KAAKsG,iBAAiB,UAAU,SAAAC,GACnCA,EAAMC,iBACNnF,EAAKlB,WAAWmB,UAAY,GAC5BgE,EAASxB,KAAOyC,EAAME,cAAcC,MAAMC,MAAMC,OAChDtB,EAAS5E,eAAe6E,MAAK,SAAA/G,GACP,MAAhBA,EAAKqI,QAA+B,MAAbrI,EAAKsI,KAC9BrD,EAAoBjF,GACpB6C,EAAKrB,KAAK+G,UAqOPC,gBAAM,CACXvC,KAAM,kCACNC,aAAc,OACdC,MAAO,MArOLtD,EAAKrB,KAAK+G,eAgJhB1F,EAAKhB,KAAKiG,iBAAiB,SAAS,WAClCX,IACAZ,KACK1D,EAAKpB,QAAQ2F,UAAUqB,SAAS,YAAc5F,EAAKjB,SAASkB,YAC/DmE,QAAQC,IAAI,QACZP,QAGJ9D,EAAKjB,SAASkG,iBAAiB,SAAS,SAAAC,GAEtC,GADAA,EAAMC,iBACwB,MAA1BD,EAAMW,OAAOC,SAAkB,CACjC,IAAM7E,EAAQK,OAAOM,SAASsD,EAAMW,OAAOE,QAAQ9E,OAAS,EACtD8C,EAAmBxB,aAAaC,QAAb,WAAgCvB,GACzDsB,aAAagB,QAAQ,cAAeQ,GACpCD,IACAQ,IAG4B,WAA1BY,EAAMW,OAAOC,UAuCnB,SAA4BtC,GAC1B,IAAMvC,EAAQK,OAAOM,SAAS4B,GACxBlB,EAAiBC,aAAaC,QAAQ,kBAC5C,GAAIvB,GAAS,GAAKA,GAASqB,EAAgB,CACzCC,aAAayD,WAAb,YAAmC/E,EAAQ,IAC3C,IAAK,IAAI8B,EAAI9B,EAAQ,EAAG8B,GAAKT,EAAgBS,IAAK,CAChD,IAAIS,EAAM,WAAWT,EACf/B,EAAOiC,KAAKC,MAAMX,aAAaC,QAAQgB,IAC7CjB,aAAayD,WAAWxC,GACxBA,EAAM,YAAWT,EAAI,GACrBR,aAAagB,QAAQC,EAAKP,KAAKQ,UAAUzC,IAE3C,IAAM+C,EAAmBxB,aAAaC,QAAb,aACzBD,aAAagB,QAAQ,cAAeQ,GAEpCxB,aAAagB,QAAQ,iBAAkBjB,EAAiB,GACxDoB,IAC+C,MAA3CnB,aAAaC,QAAQ,oBACvBD,aAAayD,WAAb,kBACAzD,aAAayD,WAAb,eACAvB,MAzDFwB,CADYf,EAAMW,OAAOE,QAAQ9E,UA0BjCsB,aAAaC,QAAQ,eACvBsB,IACKW,IAiEPzE,EAAKf,SAASgG,iBAAiB,SAAS,SAAAC,GATxC,IACQgB,KAAU,CACdC,QAAS,KAEJ,IAAIC,SAAQ,SAACC,EAAKC,GACvBC,UAAUC,YAAYC,mBAAmBJ,EAAKC,EAAKJ,OAMlDhC,MAAK,SAAAwC,GACJ,IAAMC,EAAMD,EAASE,OAAOC,SACtBC,EAAMJ,EAASE,OAAOG,UAC5BC,EAAWL,IAAMA,EACjBK,EAAWF,IAAMA,EACjBE,EAAWlH,oBAAoBoE,MAAK,SAAA/G,GACd,MAAhBA,EAAKqI,QAA+B,MAAbrI,EAAKsI,IAC9BrD,EAAoBjF,GAEpB6H,UAILiC,OAAM,SAAAC,IAGS,e,EAAA,G,EAAA,yBAAG,mHACQ3H,MAFb,8EACK,cACTC,EADS,yBAERA,EAASC,QAFD,0C,+KAAH,qDAId0H,GAAWjD,MAAK,SAAA1E,GACdwH,EAAWL,IAAMrF,OAAOC,WAAW/B,EAASqH,UAC5CG,EAAWF,IAAMxF,OAAOC,WAAW/B,EAASuH,WAC5CC,EAAWlH,oBAAoBoE,MAAK,SAAA/G,GACd,MAAhBA,EAAKqI,QAA+B,MAAbrI,EAAKsI,IAC9BrD,EAAoBjF,GAEpB6H,kB","file":"main.7f57d23a1d87f4c6b4f9.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, alias5=container.lambda, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<h1><span class=\\\"hidden\\\">Город:</span>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":38},\"end\":{\"line\":2,\"column\":46}}}) : helper)))\n    + \"</h1>\\n<h2 class=\\\"js-td\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"dt\") || (depth0 != null ? lookupProperty(depth0,\"dt\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"dt\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":18},\"end\":{\"line\":3,\"column\":24}}}) : helper)))\n    + \"</h2>\\n<div class=\\\"current-weather\\\">\\n    <img class=\\\"current-weather__icon\\\" src=\\\"https://openweathermap.org/img/w/\"\n    + alias4(alias5(((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"weather\") : depth0)) != null ? lookupProperty(stack1,\"0\") : stack1)) != null ? lookupProperty(stack1,\"icon\") : stack1), depth0))\n    + \".png\\\"\\n        alt=\\\"\"\n    + alias4(alias5(((stack1 = (depth0 != null ? lookupProperty(depth0,\"weather\") : depth0)) != null ? lookupProperty(stack1,\"main\") : stack1), depth0))\n    + \"\\\" width=\\\"100\\\" height=\\\"100\\\">\\n    <p><span class=\\\"hidden\\\">Температура:</span> <span class=\\\"current-weather__temp js-temp\\\">\"\n    + alias4(alias5(((stack1 = (depth0 != null ? lookupProperty(depth0,\"main\") : depth0)) != null ? lookupProperty(stack1,\"temp\") : stack1), depth0))\n    + \"</span></p>\\n</div>\\n<p class=\\\"current-weather__max-temp\\\">Макс. <span class=\\\"js-temp\\\">\"\n    + alias4(alias5(((stack1 = (depth0 != null ? lookupProperty(depth0,\"main\") : depth0)) != null ? lookupProperty(stack1,\"temp_max\") : stack1), depth0))\n    + \"</span>, мин. <span\\n        class=\\\"js-temp\\\">\"\n    + alias4(alias5(((stack1 = (depth0 != null ? lookupProperty(depth0,\"main\") : depth0)) != null ? lookupProperty(stack1,\"temp_min\") : stack1), depth0))\n    + \"</span></p>\\n<p class=\\\"current-weather__desc\\\">\"\n    + alias4(alias5(((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"weather\") : depth0)) != null ? lookupProperty(stack1,\"0\") : stack1)) != null ? lookupProperty(stack1,\"description\") : stack1), depth0))\n    + \"</p>\\n<p class=\\\"weather-add\\\"><span>Температура RealFeel:</span><span class=\\\"js-temp rightside\\\">\"\n    + alias4(alias5(((stack1 = (depth0 != null ? lookupProperty(depth0,\"main\") : depth0)) != null ? lookupProperty(stack1,\"feels_like\") : stack1), depth0))\n    + \"</span></p>\\n<p class=\\\"weather-add\\\"><span>Влажность:</span> <span class=\\\"rightside\\\">\"\n    + alias4(alias5(((stack1 = (depth0 != null ? lookupProperty(depth0,\"main\") : depth0)) != null ? lookupProperty(stack1,\"humidity\") : stack1), depth0))\n    + \"%</span></p>\\n<p class=\\\"weather-add\\\"><span>Давление:</span><span class=\\\"rightside\\\">\"\n    + alias4(alias5(((stack1 = (depth0 != null ? lookupProperty(depth0,\"main\") : depth0)) != null ? lookupProperty(stack1,\"pressure\") : stack1), depth0))\n    + \" мм.рт.ст</span></p>\\n<p class=\\\"weather-add\\\"><span>Средняя cкорость ветра:</span><span class=\\\"rightside\\\"><span\\n            class=\\\"js-wind\\\">\"\n    + alias4(alias5(((stack1 = (depth0 != null ? lookupProperty(depth0,\"wind\") : depth0)) != null ? lookupProperty(stack1,\"deg\") : stack1), depth0))\n    + \"</span> \"\n    + alias4(alias5(((stack1 = (depth0 != null ? lookupProperty(depth0,\"wind\") : depth0)) != null ? lookupProperty(stack1,\"speed\") : stack1), depth0))\n    + \"м/сек</span>\\n</p>\\n<p class=\\\"weather-add\\\"><span>Средняя облачность:</span><span class=\\\"rightside\\\">\"\n    + alias4(alias5(((stack1 = (depth0 != null ? lookupProperty(depth0,\"clouds\") : depth0)) != null ? lookupProperty(stack1,\"all\") : stack1), depth0))\n    + \"%</span></p>\\n<p class=\\\"weather-add\\\"><span>Восход солнца:</span><span class=\\\"js-time rightside\\\">\"\n    + alias4(alias5(((stack1 = (depth0 != null ? lookupProperty(depth0,\"sys\") : depth0)) != null ? lookupProperty(stack1,\"sunrise\") : stack1), depth0))\n    + \"</span></p>\\n<p class=\\\"weather-add\\\"><span>Заход солнца:</span><span class=\\\"js-time rightside\\\">\"\n    + alias4(alias5(((stack1 = (depth0 != null ? lookupProperty(depth0,\"sys\") : depth0)) != null ? lookupProperty(stack1,\"sunset\") : stack1), depth0))\n    + \"</span></p>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":21,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"item\\\">\\n    <a href=\\\"\\\" class=\\\"item-btn\\\" data-index=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"index\") || (data && lookupProperty(data,\"index\"))) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"index\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":44},\"end\":{\"line\":3,\"column\":54}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"city\") || (depth0 != null ? lookupProperty(depth0,\"city\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"city\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":56},\"end\":{\"line\":3,\"column\":64}}}) : helper)))\n    + \", \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"country\") || (depth0 != null ? lookupProperty(depth0,\"country\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"country\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":66},\"end\":{\"line\":3,\"column\":77}}}) : helper)))\n    + \"</a>\\n    <button class=\\\"item-btn__close\\\" type=\\\"button\\\" data-index=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"index\") || (data && lookupProperty(data,\"index\"))) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"index\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":62},\"end\":{\"line\":4,\"column\":72}}}) : helper)))\n    + \"\\\">\\n    </button>\\n</li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":7,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","export default {\n  body: document.querySelector('body'),\n  form: document.querySelector('#weatherForm'),\n  formBox: document.querySelector('.js-form-box'),\n  input: document.querySelector('#weatherInput'),\n  weatherBox: document.querySelector('#weather-box'),\n  cityList: document.querySelector('#cityList'),\n  menu: document.querySelector('#menu'),\n  localBtn: document.querySelector('.js-local'),\n};\n","const API_key = '090fc987cd5621140b25360d9b4c89d1';\n\nexport default {\n  _city: ``,\n  get city() {\n    return this._city;\n  },\n  set city(newCity) {\n    this._city = newCity;\n  },\n  async fetchWeather() {\n    // api.openweathermap.org/data/2.5/weather?lat={lat}&lon={lon}&appid={API key}\n    const url = `https://api.openweathermap.org/data/2.5/weather?q=${this._city}&units=metric&lang=ru&appid=${API_key}`;\n    const response = await fetch(url);\n    return response.json();\n  },\n};\n","const API_key = '090fc987cd5621140b25360d9b4c89d1';\n\nexport default {\n  _lat: 0,\n  _lon: 0,\n  set lat(newLat) {\n    this._lat = newLat;\n  },\n  set lon(newLon) {\n    this._lon = newLon;\n  },\n  async fetchWeatherByLoc() {\n    const url = `https://api.openweathermap.org/data/2.5/weather?lat=${this._lat}&lon=${this._lon}&units=metric&lang=ru&appid=${API_key}`;\n    const response = await fetch(url);\n    return response.json();\n  },\n};\n","import refs from './refs.js';\nimport fetchApi from './fetchApi.js';\nimport fetchByLoc from './fetchByLoc.js';\nimport itemTpl from '../templates/item.hbs';\nimport cityTpl from '../templates/city.hbs';\n\nimport '@pnotify/core/dist/BrightTheme.css';\nimport '@pnotify/core/dist/Material.css';\nimport '@pnotify/core/dist/PNotify.css';\n\nimport { alert, notice, info, success, error } from '@pnotify/core';\n\nrefs.form.addEventListener('submit', event => {\n  event.preventDefault();\n  refs.weatherBox.innerHTML = '';\n  fetchApi.city = event.currentTarget.query.value.trim();\n  fetchApi.fetchWeather().then(data => {\n    if (data.status === 200 || data.cod === 200) {\n      addCityToFavourites(data);\n      refs.form.reset();\n    } else {\n      showAlert();\n      refs.form.reset();\n    }\n  });\n});\n\nfunction render(data) {\n  refs.weatherBox.innerHTML = '';\n  const templateItem = itemTpl(data);\n  refs.weatherBox.insertAdjacentHTML('beforeend', templateItem);\n  const dateRef = document.querySelector('.js-td');\n  let toDay = new Date(dateRef.textContent * 1000);\n  const options = {\n    weekday: 'long',\n    month: 'long',\n    day: 'numeric',\n  };\n  const localeUk = toDay.toLocaleString('Ru-ru', options);\n  dateRef.textContent = `${localeUk}`;\n  const tempArray = document.querySelectorAll('.js-temp');\n  tempArray.forEach(\n    (item, index) => (item.textContent = roundTemp(tempArray)[index] + '°'),\n  );\n  const timeMsArr = document.querySelectorAll('.js-time');\n  timeMsArr.forEach(\n    (item, index) => (item.textContent = convertTime(timeMsArr)[index]),\n  );\n  const windDir = document.querySelector('.js-wind');\n  windDir.textContent = convertDir(windDir);\n}\n\nfunction roundTemp(tempArray) {\n  const roundTempsArr = [];\n  tempArray.forEach(({ textContent }) => {\n    roundTempsArr.push(Math.round(Number.parseFloat(textContent)));\n  });\n  return roundTempsArr;\n}\n\nfunction convertTime(timeMsArr) {\n  const convertedTimeArr = [];\n  timeMsArr.forEach(({ textContent }) => {\n    const time = new Date(Number.parseInt(textContent) * 1000);\n    const options = {\n      hour: '2-digit',\n      minute: '2-digit',\n    };\n    const convertedTime = time.toLocaleTimeString('Ru-ru', options);\n    convertedTimeArr.push(convertedTime);\n  });\n  return convertedTimeArr;\n}\n\nfunction convertDir({ textContent }) {\n  const degree = Number.parseInt(textContent);\n  switch (true) {\n    case degree === 0 || 360:\n      return 'С';\n    case degree > 0 && degree < 45:\n      return 'ССВ';\n    case degree === 45:\n      return 'СВ';\n    case degree > 45 && degree < 90:\n      return 'ВСВ';\n    case degree === 90:\n      return 'В';\n    case degree > 90 && degree < 135:\n      return 'ВЮВ';\n    case degree === 135:\n      return 'ЮВ';\n    case degree > 135 && degree < 180:\n      return 'ЮЮВ';\n    case degree === 180:\n      return 'Ю';\n    case degree > 180 && degree < 225:\n      return 'ЮЮЗ';\n    case degree === 225:\n      return 'ЮЗ';\n    case degree > 225 && degree < 270:\n      return 'ЗЮЗ';\n    case degree === 270:\n      return 'З';\n    case degree > 270 && degree < 315:\n      return 'ЗСЗ';\n    case degree === 315:\n      return 'СЗ';\n    case degree > 315 && (degree === 0 || 360):\n      return 'ССЗ';\n    default:\n      return degree;\n  }\n}\n\nfunction addCityToFavourites(object) {\n  let index;\n  const countFavorites = localStorage.getItem('countFavorites');\n\n  const city = {\n    id: object.id,\n    city: object.name,\n    coord: object.coord,\n    country: object.sys.country,\n  };\n\n  if (countFavorites) {\n    index = Number.parseInt(countFavorites);\n    index++;\n\n    for (let i = 1; i < index; i++) {\n      const storageObject = JSON.parse(localStorage.getItem(`favorite${i}`));\n      const storageCity = storageObject.city;\n      if (object.name === storageCity) {\n        return showNoticeCity(); //notice\n      }\n    }\n    localStorage.setItem('countFavorites', `${index}`);\n    const key = `favorite${index}`;\n    localStorage.setItem(key, JSON.stringify(city));\n    localStorage.setItem('currentCity', JSON.stringify(city));\n    showFavourites();\n  } else {\n    index = 1;\n    localStorage.setItem('countFavorites', `${index}`);\n\n    const key = `favorite${index}`;\n    localStorage.setItem(key, JSON.stringify(city));\n    localStorage.setItem('currentCity', JSON.stringify(city));\n    showFavourites();\n  }\n}\nfunction showFavourites() {\n  refs.cityList.innerHTML = '';\n  const countFavorites = localStorage.getItem('countFavorites');\n  if (countFavorites) {\n    const favoriteArr = [];\n    const index = Number.parseInt(countFavorites);\n    for (let i = 1; i <= index; i++) {\n      const key = `favorite${i}`;\n      const item = JSON.parse(localStorage.getItem(key));\n      favoriteArr.push(item);\n    }\n    const markup = cityTpl({ ...favoriteArr });\n    refs.cityList.insertAdjacentHTML('beforeend', markup);\n  }\n}\nrefs.menu.addEventListener('click', () => {\n  toggleMenu();\n  showFavourites();\n  if (!refs.formBox.classList.contains('is-open') && refs.cityList.innerHTML) {\n    console.log('load');\n    chooseShowCity();\n  }\n});\nrefs.cityList.addEventListener('click', event => {\n  event.preventDefault();\n  if (event.target.nodeName === 'A') {\n    const index = Number.parseInt(event.target.dataset.index) + 1;\n    const currentCityLocal = localStorage.getItem(`favorite${index}`);\n    localStorage.setItem('currentCity', currentCityLocal);\n    chooseShowCity();\n    toggleMenu();\n  }\n\n  if (event.target.nodeName === 'BUTTON') {\n    const key = event.target.dataset.index;\n    deleteFavoriteCity(key);\n  }\n});\n\nfunction chooseShowCity() {\n  const currentCityLocal = localStorage.getItem('currentCity');\n  const localCity = JSON.parse(currentCityLocal);\n\n  if (localCity !== null) {\n    fetchApi.city = localCity.city;\n    fetchApi.fetchWeather().then(\n      data => render({ data }),\n      onRej => console.log(onRej),\n    );\n  } else {\n    const currentCityLocal = localStorage.getItem(`favorite1`);\n    localStorage.setItem('currentCity', currentCityLocal);\n  }\n}\n\nfunction toggleMenu() {\n  refs.formBox.classList.toggle('is-open');\n  refs.weatherBox.classList.toggle('is-open');\n}\n//Показываем погоду\nif (localStorage.getItem('currentCity')) {\n  chooseShowCity();\n} else WeatherBoxIsEmpty();\n\nfunction WeatherBoxIsEmpty() {\n  refs.weatherBox.innerHTML = '';\n  const h2 = document.createElement('h2');\n  h2.classList.add('weather-box__error');\n  h2.style.fontSize = '24px';\n  h2.textContent = 'Выберите город для отслеживания погоды';\n  refs.weatherBox.insertAdjacentElement('beforeend', h2);\n}\nfunction deleteFavoriteCity(key) {\n  const index = Number.parseInt(key);\n  const countFavorites = localStorage.getItem('countFavorites');\n  if (index >= 0 && index <= countFavorites) {\n    localStorage.removeItem(`favorite${index + 1}`);\n    for (let i = index + 2; i <= countFavorites; i++) {\n      let key = `favorite${i}`;\n      const item = JSON.parse(localStorage.getItem(key));\n      localStorage.removeItem(key);\n      key = `favorite${i - 1}`;\n      localStorage.setItem(key, JSON.stringify(item));\n    }\n    const currentCityLocal = localStorage.getItem(`favorite1`);\n    localStorage.setItem('currentCity', currentCityLocal);\n\n    localStorage.setItem('countFavorites', countFavorites - 1);\n    showFavourites();\n    if (localStorage.getItem('countFavorites') === '0') {\n      localStorage.removeItem(`countFavorites`);\n      localStorage.removeItem(`currentCity`);\n      WeatherBoxIsEmpty();\n    }\n  }\n}\nfunction showAlert() {\n  return alert({\n    text: 'Не найден город, попробуйте еще',\n    animateSpeed: 'fast',\n    delay: 3000,\n  });\n}\nfunction showNoticeCity() {\n  return notice({\n    text: 'Город уже добавлен',\n    animateSpeed: 'fast',\n    delay: 3000,\n  });\n}\nfunction showNoticeLoc() {\n  return notice({\n    text: 'Нет доступа к местоположению',\n    animateSpeed: 'fast',\n    delay: 3000,\n  });\n}\n\nfunction getCurrentPosition() {\n  const options = {\n    timeout: 5000,\n  };\n  return new Promise((res, rej) => {\n    navigator.geolocation.getCurrentPosition(res, rej, options);\n  });\n}\n\nrefs.localBtn.addEventListener('click', event => {\n  getCurrentPosition()\n    .then(location => {\n      const lat = location.coords.latitude;\n      const lon = location.coords.longitude;\n      fetchByLoc.lat = lat;\n      fetchByLoc.lon = lon;\n      fetchByLoc.fetchWeatherByLoc().then(data => {\n        if (data.status === 200 || data.cod === 200) {\n          addCityToFavourites(data);\n        } else {\n          showNoticeLoc();\n        }\n      });\n    })\n    .catch(err => {\n      const API_key = 'dff7afe788c44b9e90e7b4fd64d0bb1b';\n      const url = `https://api.ipgeolocation.io/ipgeo?apiKey=${API_key}`;\n      const fetchGeo = async function () {\n        const response = await fetch(url);\n        return response.json();\n      };\n      fetchGeo().then(response => {\n        fetchByLoc.lat = Number.parseFloat(response.latitude);\n        fetchByLoc.lon = Number.parseFloat(response.longitude);\n        fetchByLoc.fetchWeatherByLoc().then(data => {\n          if (data.status === 200 || data.cod === 200) {\n            addCityToFavourites(data);\n          } else {\n            showNoticeLoc();\n          }\n        });\n      });\n    });\n});\n"],"sourceRoot":""}